<!--miniprogram/pages/guide.wxml-->
<view class='container'>
  <i-spin fix size="large" wx:if="{{pageLoading}}"/>
  <!-- 进行中的活动 -->
  <view wx:for="{{waitingList}}" wx:key="{{index}}" class='cardWraper shadow5'>
    <view class='cardHeader'>
      <text class='title'>{{item.title}}</text>
      <text class='headerRight'><text class='joins'>{{item.joins.length}}</text><text>/{{item.joinNum}}</text>
      </text>
    </view>

    <view class='cardContent'>
      <view class='contentLeft'>
        <view>活动项目:<text class='ml15'>{{item.name}}</text></view>
        <view bindtap='viewMap' data-latitude='{{item.latitude}}' data-longitude='{{item.longitude}}'>
          活动地点:
          <text class='ml15'>{{item.address}}</text>
        </view>
      </view>
      <!-- <view class='contentRight wait' wx:if="{{item.curStatus=='wait'}}">报名</view> -->
      <van-button 
        wx:if="{{item.curStatus=='wait'}}"
        class='wait' 
        size="small" 
        plain 
        hairline
        type="primary" 
      >
        立即报名
      </van-button>
      <view class='contentRight going' wx:else>进行中</view>
    </view>
    <view>活动时间:<text class='ml15'>{{item.startTime}}至{{item.endTime}}</text></view>
    <view wx:if="{{item.remarks}}" class='cardBottom'>{{item.remarks}}</view>
  </view>
  <!-- 没有进行中的活动 -->
  <view 
    wx:if="{{!pageLoading&&waitingList.length<1}}"
    class='empty'
    bindTap="addNew"
    >
    <text >还没有活动，赶快去 </text>
    <navigator url="../newActivity/newActivity" open-type="navigate">
      发起一个吧
    </navigator>
  </view>
  <!-- 已结束的活动 -->
  <!-- 发起活动浮窗按钮 -->
  <van-icon name="plus" bindtap='goNewActivity' class='floatIcon shadow5'/>
  
  <navigator 
    url="../guide/index" 
    hover-class="navigator-hover">
    跳转到新页面
  </navigator>
  <button 
    open-type="getUserInfo" 
    bindgetuserinfo="getUserInfo"> 
    获取头像昵称 
  </button>
</view>
    


